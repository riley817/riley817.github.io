# 1.1 개념 및 용어 정리 - Document, Index, Type, Cluster, Node


## Document
+ 도큐먼트는 `JSON (Javascript Object Notation)` 형태의 Elasticsearch 의 기본 저장단위 이다.
+ 관계형 데이터 베이스의 `Row` 와 비슷한 개념으로 볼 수 있다.
+ 도큐먼트는 데이터에 적재될 때 `Document ID` 를 갖는다.
+ **Document ID 는 지정하지 않으면 랜덤하게 생성** 되며, 사용자가 정의한 값으로도 생성 가능하다.
+ Document ID 는 데이터를 찾아가는 Metadata 로 볼 수 있다.

## Index
+ Index 는 비슷한 형질을 가지는 도큐먼트 간의 집합이다.
+ 관계형 데이터 베이스의 `Database` 와 비슷한 개념으로 볼 수 있다.
+ 여러 도큐멘트들이 하나의 인덱스에 적재된다.
+ 인덱스 이름은 문서에 대한 인덱싱/검색/갱신/삭제 등을 수행할 때 참조값으로 사용된다.
+ 인덱스는 사전에 정의되어야 할 데이터 타입이나, 특정한 구조가 필요하지 않다면 최초 데이터가 인입될 때 생성 된다.
+ ex) 고객정보, 제품카탈로그, 주문정보 등...

## Type
+ 관계형 데이터 베이스의 `Table` 과 비슷한 개념으로 볼 수 있다.
+ 타입은 인덱스의 파티션으로 사용 된다.
+ 하나의 인덱스에 도큐먼트를 저장할때 타입을 분리해서 인덱싱이 가능하다.

> ES 6.0.0 버전 부터는 Multi Type 을 지정이 Deprecated 되었으며, 하나의 인덱스에는 단일 타입으로만 지정하도록 권고하고 있다.

## Cluster
+ **Elasticsearch 는 클러스터로 구성**되어 있다.
+ 클러스는 전체 데이터 (모든 노드) 간 통합 인덱싱 및 검색이 가능한 1개 이상의 노드(서버) 의 집합이다.
+ 사용자는 이 클러스터를 통해 데이터를 저장하고 검색 요청을 할 수 있다.
+ 클러스터는 고유의 `cluster_name` 과 `cluster_uuid` 를 갖는다.
+ 클러스터 이름은 따로 지정하지 않으면 유니크한 이름으로 생성된다.

## Node
+ 노드는 클러스터를 구성하는 단일 서버로써, 서로 헬스 체크를 하거나 혹은 데이터를 저장하고 클러스터에 참여하여 인덱싱과 검색 역할을 수행한다.
+ 노드는 각자의 노드 이름을 갖으며 노드가 기동될때 랜덤 UUID 를 갖는다.
+ 노드는 역할에 따라 `master node`, `data node`, `all node`, `client node` 등으로 구성할 수 있다.

> 모든 노드는 클러스터의 다른 모든 노드에 대해 알고 있으며, 클라이언트 요청을 해당 노드로 전달할 수 있다.

### Node 종류
#### master node
클러스터를 제어하는 **마스터 노드**. 구성 노드들의 헬스 체크를 담당한다.

#### data node
데이터를 저장하고 CRUD, 검색 및 집계와 같은 데이터 관련 작업을 수행한다.

#### all node
master 혹은 data 노드의 구분이 필요 없을 때 두가지 역할을 담당한다. 보통은 확장이 필요 없거나 요청 쿼리가 많지 않고 데이터를 오래 보관해야 하는 경우 구성한다.

#### client node
쿼리만을 받기 위한 노드이며, 부하가 많거나 요청 쿼리량이 많을 때 부하 분산용으로 구성한다.


## 참고
+ [Elasticsearch Reference - Basic Concepts](https://www.elastic.co/guide/en/elasticsearch/reference/6.5/_basic_concepts.html)
