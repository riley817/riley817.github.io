<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>26. AWS Identity and Access Management - Advanced - ğŸğŸ¥ğŸ¥– ë¼ì¼ë¦¬ì˜ ì½”ë“œ ë¶€ìŠ¤ëŸ¬ê¸° ğŸğŸ¥ğŸ¥–</title><meta name="Description" content="Riley&#39;s DevLog"><meta property="og:url" content="https://riley817.github.io/aws-26-iam-advanced/">
  <meta property="og:site_name" content="ğŸğŸ¥ğŸ¥– ë¼ì¼ë¦¬ì˜ ì½”ë“œ ë¶€ìŠ¤ëŸ¬ê¸° ğŸğŸ¥ğŸ¥–">
  <meta property="og:title" content="26. AWS Identity and Access Management - Advanced">
  <meta property="og:description" content="STS - Security Token Service AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì œí•œì ì´ê³  ì¼ì‹œì ì¸ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ í—ˆìš© í† í°ì€ 1 ì‹œê°„ê¹Œì§€ ìœ íš¨ (ìƒˆë¡œê³ ì¹¨ í•„ìš”) STS API STS API ì„¤ëª… AssumeRole - ê°œì¸ ê³„ì • ë‚´ì—ì„œ: ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš© - ê³„ì • ê°„ : ëŒ€ìƒ ê³„ì •ì— ì—­í• ì„ ìˆ˜ì„í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰ AssumeRoleWithSAML - SAMLìœ¼ë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜ AssumeRoleWithWebIdentity - IdP(Identity Provider - Facebook Login, Google Login, OIDC Compatibleâ€¦) ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜ - ì´ê²ƒë³´ë‹¤ëŠ” AWS Cognito ì¶”ì²œí•¨ GetSessionToken - AWS ë£¨íŠ¸ ê³„ì • ë˜ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ MFA ì¸ì¦ STSë¥¼ í†µí•´ ì—­í• ì„ ìˆ˜ì„ë°›ê¸° IAM ê³„ì • ë‚´ í˜¹ì€ ê³„ì • ê°„ IAM ì—­í• (Role)ì„ ì •ì˜í•œë‹¤.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-07-16T16:14:49+09:00">
    <meta property="article:modified_time" content="2024-06-29T23:59:44+09:00">
    <meta property="article:tag" content="AWS">
    <meta property="article:tag" content="AWS IAM">
    <meta property="og:image" content="https://riley817.github.io/icon.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://riley817.github.io/icon.png">
  <meta name="twitter:title" content="26. AWS Identity and Access Management - Advanced">
  <meta name="twitter:description" content="STS - Security Token Service AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì œí•œì ì´ê³  ì¼ì‹œì ì¸ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ í—ˆìš© í† í°ì€ 1 ì‹œê°„ê¹Œì§€ ìœ íš¨ (ìƒˆë¡œê³ ì¹¨ í•„ìš”) STS API STS API ì„¤ëª… AssumeRole - ê°œì¸ ê³„ì • ë‚´ì—ì„œ: ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš© - ê³„ì • ê°„ : ëŒ€ìƒ ê³„ì •ì— ì—­í• ì„ ìˆ˜ì„í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰ AssumeRoleWithSAML - SAMLìœ¼ë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜ AssumeRoleWithWebIdentity - IdP(Identity Provider - Facebook Login, Google Login, OIDC Compatibleâ€¦) ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜ - ì´ê²ƒë³´ë‹¤ëŠ” AWS Cognito ì¶”ì²œí•¨ GetSessionToken - AWS ë£¨íŠ¸ ê³„ì • ë˜ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ MFA ì¸ì¦ STSë¥¼ í†µí•´ ì—­í• ì„ ìˆ˜ì„ë°›ê¸° IAM ê³„ì • ë‚´ í˜¹ì€ ê³„ì • ê°„ IAM ì—­í• (Role)ì„ ì •ì˜í•œë‹¤.">
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://riley817.github.io/aws-26-iam-advanced/" /><link rel="prev" href="https://riley817.github.io/aws-06-ec2-associate/" /><link rel="next" href="https://riley817.github.io/aws-07-ebs/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "26. AWS Identity and Access Management - Advanced",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/riley817.github.io\/aws-26-iam-advanced\/"
        },"image": ["https:\/\/riley817.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "AWS, AWS IAM","wordcount":  1551 ,
        "url": "https:\/\/riley817.github.io\/aws-26-iam-advanced\/","datePublished": "2022-07-16T16:14:49+09:00","dateModified": "2024-06-29T23:59:44+09:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/riley817.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "riley"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸğŸ¥ğŸ¥– ë¼ì¼ë¦¬ì˜ ì½”ë“œ ë¶€ìŠ¤ëŸ¬ê¸° ğŸğŸ¥ğŸ¥–"><span class="header-title-pre"><i class='fa-brands fa-github-alt'></i>&nbsp;</span>Riley&#39;s CodeCrumbs</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸğŸ¥ğŸ¥– ë¼ì¼ë¦¬ì˜ ì½”ë“œ ë¶€ìŠ¤ëŸ¬ê¸° ğŸğŸ¥ğŸ¥–"><span class="header-title-pre"><i class='fa-brands fa-github-alt'></i>&nbsp;</span>Riley&#39;s CodeCrumbs</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">26. AWS Identity and Access Management - Advanced</h1><h2 class="single-subtitle">AWS Certified SAA-C02 ì‹œí—˜ì¤€ë¹„</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/riley817" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>riley</a></span>&nbsp;<span class="post-category">included in <a href="/categories/aws-certified-saa-c02-%EC%8B%9C%ED%97%98%EC%A4%80%EB%B9%84/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AWS Certified SAA-C02 ì‹œí—˜ì¤€ë¹„</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-07-16">2022-07-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1551 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/images/aws/cloud-service-thumbnail.png"
        data-srcset="/posts/images/aws/cloud-service-thumbnail.png, /posts/images/aws/cloud-service-thumbnail.png 1.5x, /posts/images/aws/cloud-service-thumbnail.png 2x"
        data-sizes="auto"
        alt="/posts/images/aws/cloud-service-thumbnail.png"
        title="/posts/images/aws/cloud-service-thumbnail.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#sts---security-token-service">STS - Security Token Service</a>
      <ul>
        <li><a href="#sts-api">STS API</a></li>
        <li><a href="#stsë¥¼-í†µí•´-ì—­í• ì„-ìˆ˜ì„ë°›ê¸°">STSë¥¼ í†µí•´ ì—­í• ì„ ìˆ˜ì„ë°›ê¸°</a></li>
        <li><a href="#ê³„ì •-ê°„-sts">ê³„ì • ê°„ STS</a></li>
      </ul>
    </li>
    <li><a href="#identity-federation-in-aws">Identity Federation in AWS</a>
      <ul>
        <li><a href="#federationsì˜-ì¢…ë¥˜">Federationsì˜ ì¢…ë¥˜</a>
          <ul>
            <li><a href="#saml-20-federation">SAML 2.0 Federation</a></li>
            <li><a href="#custom-identity-broker-application">Custom Identity Broker Application</a></li>
            <li><a href="#web-identity-federation---assumerolewithwebidentity">Web Identity Federation - AssumeRoleWithWebIdentity</a></li>
          </ul>
        </li>
        <li><a href="#aws-cognito">AWS Cognito</a></li>
        <li><a href="#microsoft-active-directory-ad">Microsoft Active Directory (AD)</a></li>
        <li><a href="#aws-directory-services">AWS Directory Services</a></li>
      </ul>
    </li>
    <li><a href="#aws-organizations">AWS Organizations</a>
      <ul>
        <li><a href="#ë‹¤ì¤‘-ê³„ì •-ì „ëµ">ë‹¤ì¤‘ ê³„ì • ì „ëµ</a></li>
        <li><a href="#organizational-units-ou">Organizational Units (OU)</a></li>
        <li><a href="#service-control-policies-scp">Service Control Policies (SCP)</a>
          <ul>
            <li><a href="#scp-hierarchy">SCP Hierarchy</a>
              <ul>
                <li><a href="#blacklist--whitelist-ì „ëµ">Blacklist &amp; Whitelist ì „ëµ</a>
                  <ul>
                    <li><a href="#íŠ¹ì •-ìœ í˜•ì˜-ì„œë¹„ìŠ¤ë¥¼-ë¸”ë™ë¦¬ìŠ¤íŠ¸ë¡œ-ë“±ë¡">íŠ¹ì • ìœ í˜•ì˜ ì„œë¹„ìŠ¤ë¥¼ ë¸”ë™ë¦¬ìŠ¤íŠ¸ë¡œ ë“±ë¡</a></li>
                    <li><a href="#íŠ¹ì •-ìœ í˜•ì˜-ì„œë¹„ìŠ¤ë§Œ-í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì—-ì¶”ê°€">íŠ¹ì • ìœ í˜•ì˜ ì„œë¹„ìŠ¤ë§Œ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#ì¡°ì§-ì´ë™">ì¡°ì§ ì´ë™</a>
          <ul>
            <li><a href="#ê³„ì •-ë§ˆì´ê·¸ë ˆì´ì…˜">ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜</a></li>
            <li><a href="#ë§ˆìŠ¤í„°-ê³„ì •ì˜-ë§ˆì´ê·¸ë ˆì´ì…˜">ë§ˆìŠ¤í„° ê³„ì •ì˜ ë§ˆì´ê·¸ë ˆì´ì…˜</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#iam-conditions">IAM Conditions</a></li>
    <li><a href="#iam-for-s3">IAM for S3</a>
      <ul>
        <li><a href="#iam-roleê³¼-ë¦¬ì†ŒìŠ¤-ê¸°ë°˜ì˜-ì •ì±…">IAM Roleê³¼ ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ì˜ ì •ì±…</a></li>
        <li><a href="#iam-permission-boundaries">IAM Permission Boundaries</a>
          <ul>
            <li><a href="#permission-boundaries-ì‚¬ìš©-ì‚¬ë¡€">Permission Boundaries ì‚¬ìš© ì‚¬ë¡€</a></li>
            <li><a href="#iam-policy-evaluation-logic">IAM Policy Evaluation Logic</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#aws-resource-access-manager-ram">AWS Resource Access Manager (RAM)</a>
      <ul>
        <li><a href="#resource-access-manager---vpc-ì˜ˆì‹œ">Resource Access Manager - VPC ì˜ˆì‹œ</a></li>
      </ul>
    </li>
    <li><a href="#aws-single-sign-on-sso">AWS Single Sign-On (SSO)</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="sts---security-token-service">STS - Security Token Service</h2>
<ul>
<li>AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì œí•œì ì´ê³  ì¼ì‹œì ì¸ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ í—ˆìš©</li>
<li>í† í°ì€ 1 ì‹œê°„ê¹Œì§€ ìœ íš¨ (ìƒˆë¡œê³ ì¹¨ í•„ìš”)</li>
</ul>
<h3 id="sts-api">STS API</h3>
<table>
<thead>
<tr>
<th>STS API</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AssumeRole</strong></td>
<td>- ê°œì¸ ê³„ì • ë‚´ì—ì„œ: ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ ì‚¬ìš© <br/> - ê³„ì • ê°„ : ëŒ€ìƒ ê³„ì •ì— ì—­í• ì„ ìˆ˜ì„í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í–‰</td>
</tr>
<tr>
<td><strong>AssumeRoleWithSAML</strong></td>
<td>- SAMLìœ¼ë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜</td>
</tr>
<tr>
<td><strong>AssumeRoleWithWebIdentity</strong></td>
<td>- IdP(Identity Provider - Facebook Login, Google Login, OIDC Compatible&hellip;) ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ìê²©ì¦ëª…ì„ ë°˜í™˜ <br/> - <strong>ì´ê²ƒë³´ë‹¤ëŠ” AWS Cognito ì¶”ì²œí•¨</strong></td>
</tr>
<tr>
<td><strong>GetSessionToken</strong></td>
<td>- AWS ë£¨íŠ¸ ê³„ì • ë˜ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ MFA ì¸ì¦</td>
</tr>
</tbody>
</table>
<h3 id="stsë¥¼-í†µí•´-ì—­í• ì„-ìˆ˜ì„ë°›ê¸°">STSë¥¼ í†µí•´ ì—­í• ì„ ìˆ˜ì„ë°›ê¸°</h3>
<ol>
<li>IAM ê³„ì • ë‚´ í˜¹ì€ ê³„ì • ê°„ IAM ì—­í• <code>(Role)</code>ì„ ì •ì˜í•œë‹¤.</li>
<li>ì‚¬ìš©ì, ì—­í•  ë“±ì´ ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆëŠ” IAM Role ì›ì¹™<code>(Principal)</code>ì„ ì •ì˜í•œë‹¤.</li>
<li><code>AWS STS(Security Token Service)</code> ì‚¬ìš©í•˜ì—¬ IAM ì—­í• ì„ ê°€ì¥í•  ìˆ˜ ìˆëŠ” ì„ì‹œìê²©ì¦ëª…ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. (AssumeRole API)</li>
</ol>
<blockquote>
<p>ê·¸ë¦¼
ì„ì‹œìê²©ì¦ëª… ì •ë³´ëŠ” 15ë¶„ ~ 1ì‹œê°„ì‚¬ì´ì˜ ìœ íš¨ì‹œê°„ì„ ê°–ëŠ”ë‹¤.</p>
</blockquote>
<h3 id="ê³„ì •-ê°„-sts">ê³„ì • ê°„ STS</h3>
<figure><a class="lightgallery" href="/posts/images/aws/cross-account-access-with-sts.png" title="/posts/images/aws/cross-account-access-with-sts.png" data-thumbnail="/posts/images/aws/cross-account-access-with-sts.png" data-sub-html="<h2>https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_aws-accounts.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/cross-account-access-with-sts.png"
            data-srcset="/posts/images/aws/cross-account-access-with-sts.png, /posts/images/aws/cross-account-access-with-sts.png 1.5x, /posts/images/aws/cross-account-access-with-sts.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/cross-account-access-with-sts.png" width="100%" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_aws-accounts.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_aws-accounts.html</a></figcaption>
    </figure>
<ol>
<li>í”„ë¡œë•ì…˜ ê³„ì •ì˜ ê´€ë¦¬ìëŠ” ê°œë°œê³„ì •ì˜ ì‚¬ìš©ìë“¤ì´  <code>productionapp</code> ë²„ì¼“ì˜ ì½ê¸°/ì“°ê¸° IAM ì—­í• ì„ ì–»ì„ ìˆ˜ ìˆëŠ” <code>UpdateApp</code>ì„ ìƒì„±</li>
<li>ê°œë°œê³„ì •ì˜ ê´€ë¦¬ìëŠ” <code>Developer</code> ê·¸ë£¹ì˜ ë©¤ë²„ë“¤ì„ <code>UpdateApp</code> ì—­í• ì˜ STS <code>AssumeRole API</code>ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬</li>
<li>ê°œë°œê³„ì •ì˜ ì‚¬ìš©ìëŠ” ì—­í•  ì „í™˜ì„ ìš”ì²­</li>
<li><code>AWS STS</code>ëŠ” ì—­í•  ì„ì‹œìê²©ì¦ëª…ì„ ë°˜í™˜</li>
<li>ì„ì‹œ ìê²© ì¦ëª…ì€ AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©</li>
</ol>
<h2 id="identity-federation-in-aws">Identity Federation in AWS</h2>
<ul>
<li><code>Federation</code>ì„ í†µí•´ AWS ì™¸ë¶€ì˜ ì‚¬ìš©ìê°€ AWS ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ì„ì‹œ ì—­í• ì„ ìˆ˜í–‰</li>
</ul>
<h3 id="federationsì˜-ì¢…ë¥˜">Federationsì˜ ì¢…ë¥˜</h3>
<ul>
<li>
<p>SAML 2.0</p>
</li>
<li>
<p>Custom Identity Broker</p>
</li>
<li>
<p>Web Identity Federation with Amazon Cognito</p>
</li>
<li>
<p>Web Identity Federation without Amazon Cognito</p>
</li>
<li>
<p>Single Sign On</p>
</li>
<li>
<p>Non-SAML with AWS Microsoft AD</p>
<blockquote>
<p>federationì„ ì‚¬ìš©í•˜ë©´ IAM ì‚¬ìš©ìë¥¼ ìƒì„±í•  í•„ìš” ì—†ë‹¤. (ì‚¬ìš©ì ê´€ë¦¬ëŠ” AWS ì™¸ë¶€ì— ìˆë‹¤.)
ê·¸ë¦¼</p>
</blockquote>
</li>
</ul>
<h4 id="saml-20-federation">SAML 2.0 Federation</h4>
<ul>
<li><code>Active Directory</code></li>
<li><code>ADFS(Active Directory Federation Service)</code></li>
<li>AWS ì½˜ì†” ë˜ëŠ” CLIë¡œ ì•¡ì„¸ìŠ¤ ì œê³µ (ì„ì‹œ ë³´ì•ˆ ì¸ì¦ ì´ìš©)</li>
<li>ì§ì›ë³„ë¡œ IAM ì‚¬ìš©ìë¥¼ ìƒì„±í•  í•„ìš” ì—†ë‹¤.</li>
<li>AWS IAMê³¼ SAML ì‚¬ì´ì— ì‹ ë¢° ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.</li>
<li>SAML 2.0ì„ í†µí•´ ì›¹ ê¸°ë°˜ í¬ë¡œìŠ¤ ë„ë©”ì¸ì„ ì§€ì›í•œë‹¤(SSO)</li>
<li><strong>STS API : AssumeRoleWithSAML</strong></li>
<li><em>SAMLì„ í†µí•œ federation ë°©ì‹ì€ ì˜¤ë˜ëœ ë°©ì‹ì´ë‹¤.</em> -&gt; <strong>Amazon Single Sign On(SSO)</strong> ì„ í†µí•œ federationì€ ì‹¬í”Œí•˜ê³  ìƒˆë¡œìš´ ë°©ì‹</li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Using SAML-based federation for API access to AWS<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><figure><a class="lightgallery" href="/posts/images/aws/saml-based-federation.diagram.png" title="/posts/images/aws/saml-based-federation.diagram.png" data-thumbnail="/posts/images/aws/saml-based-federation.diagram.png" data-sub-html="<h2>https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/saml-based-federation.diagram.png"
            data-srcset="/posts/images/aws/saml-based-federation.diagram.png, /posts/images/aws/saml-based-federation.diagram.png 1.5x, /posts/images/aws/saml-based-federation.diagram.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/saml-based-federation.diagram.png" width="100%" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html</a></figcaption>
    </figure>
<ol>
<li>ì¡°ì§ì˜ ì‚¬ìš©ìê°€ í´ë¼ì´ì–¸íŠ¸ ì•±ì„ ì‚¬ìš©í•˜ì—¬ ì¡°ì§ì˜ IdPì—ì„œ ì¸ì¦ì„ ìš”ì²­</li>
<li>IdPëŠ” ì¡°ì§ì˜ ID ì €ì¥ì†Œì— ëŒ€í•œ ì‚¬ìš©ì ì¸ì¦</li>
<li>IdPëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¡œ SAML assertion êµ¬ì„± -&gt; í´ë¼ì´ì–¸íŠ¸ ì•±ìœ¼ë¡œ ì „ì†¡</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì•±ì€ AWS STS <code>AssumeRoleWithSAML</code> API í˜¸ì¶œ SAML ê³µê¸‰ì ARN, ìˆ˜ì„í•  ì—­í• ì˜ ARN ë° IdPì˜ SAML assertion ì „ë‹¬</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì•±ì— ëŒ€í•œ API ì‘ë‹µì— ì„ì‹œ ìê²© ì¦ëª… í¬í•¨</li>
<li>í´ë¼ì´ì–¸íŠ¸ ì•±ì€ ì„ì‹œ ìê²© ì¦ëª…ì„ ì‚¬ìš©í•˜ì—¬ Amazon S3 API í˜¸ì¶œ</li>
</ol>
</div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>AWS Management Consoleì„ ì‚¬ìš©í•˜ì—¬ SAML 2.0 federation í™œì„±í™”<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>SAML 2.0 AssertionëŠ” ìê²©ì¦ëª…ê³¼ í˜¸í™˜ë˜ë©° STS ë¦¬ì†ŒìŠ¤ë‚˜ ì½˜ì†”ì— ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.</p>
<figure><a class="lightgallery" href="/posts/images/aws/saml-based-sso-to-console.diagram.png" title="/posts/images/aws/saml-based-sso-to-console.diagram.png" data-thumbnail="/posts/images/aws/saml-based-sso-to-console.diagram.png" data-sub-html="<h2>https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-saml.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/saml-based-sso-to-console.diagram.png"
            data-srcset="/posts/images/aws/saml-based-sso-to-console.diagram.png, /posts/images/aws/saml-based-sso-to-console.diagram.png 1.5x, /posts/images/aws/saml-based-sso-to-console.diagram.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/saml-based-sso-to-console.diagram.png" width="100%" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-saml.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-saml.html</a></figcaption>
    </figure></div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Active Directory FS<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>ADFSê°€ SAML 2.0ê³¼ í˜¸í™˜ëœë‹¤ë©´ ê³¼ì •ì€ ë™ì¼í•˜ë‹¤.</li>
</ul>
<figure><a class="lightgallery" href="/posts/images/aws/federated_auth_with_adfs.png" title="/posts/images/aws/federated_auth_with_adfs.png" data-thumbnail="/posts/images/aws/federated_auth_with_adfs.png" data-sub-html="<h2>https://aws.amazon.com/ko/blogs/security/aws-federated-authentication-with-active-directory-federation-services-ad-fs/</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/federated_auth_with_adfs.png"
            data-srcset="/posts/images/aws/federated_auth_with_adfs.png, /posts/images/aws/federated_auth_with_adfs.png 1.5x, /posts/images/aws/federated_auth_with_adfs.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/federated_auth_with_adfs.png" width="100%" />
    </a><figcaption class="image-caption"><a href="https://aws.amazon.com/ko/blogs/security/aws-federated-authentication-with-active-directory-federation-services-ad-fs/" target="_blank" rel="noopener noreffer">https://aws.amazon.com/ko/blogs/security/aws-federated-authentication-with-active-directory-federation-services-ad-fs/</a></figcaption>
    </figure>
<ol>
<li>ë¸Œë¼ìš°ì € ì¸í„°í˜ì´ìŠ¤ë¡œ ADFS ë¡œê·¸ì¸</li>
<li>ADFSëŠ” ì‚¬ìš©ìê°€ ì œëŒ€ë¡œ ì¸ì¦ë˜ì—ˆëŠ”ì§€ Identity Storeë¥¼ í†µí•´ í™•ì¸</li>
<li>ADFSëŠ” SAML Assertionì„ ë°˜í™˜</li>
<li>SAML Assertionì„ AWS STS í†µí•´ ì—­í• ê³¼ êµí™˜ (Sign-in)</li>
<li>ì„ì‹œ ìê²© ì¦ëª…ì€ STS <code>AssumeRoleWithSAML</code>ì„ ì‚¬ìš©í•˜ì—¬ ë°˜í™˜</li>
<li>ì‚¬ìš©ìê°€ ì¸ì¦ë˜ê³  AWS ê´€ë¦¬ ì½˜ì†”ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ ì œê³µ</li>
</ol>
</div>
        </div>
    </div>
<h4 id="custom-identity-broker-application">Custom Identity Broker Application</h4>
<ul>
<li>IdPê°€ SAML 2.0ê³¼ í˜¸í™”ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ì‚¬ìš©</li>
<li><strong>identity ë¸Œë¡œì»¤ê°€ ì ì ˆí•œ IAM ì •ì±…ì„ ê²°ì •í•´ì•¼ í•œë‹¤.</strong></li>
<li>ì‚¬ìš© STS API : <strong>AssumeRole</strong> or <strong>GetFederationToken</strong></li>
</ul>
<figure><a class="lightgallery" href="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png" title="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png" data-thumbnail="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png" data-sub-html="<h2>https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png"
            data-srcset="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png, /posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png 1.5x, /posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/enterprise-authentication-with-identity-broker-application.diagram.png" width="100%" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html</a></figcaption>
    </figure>
<ul>
<li>ìê²© ì¦ëª… ë¸Œë¡œì»¤ëŠ” IAM STS API <code>AssumeRole</code>ê³¼ <code>GetFederationToken</code> APIë¥¼ ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ê°€ AWS ì½˜ì†”ê³¼ API ë“±ì— ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</li>
</ul>
<h4 id="web-identity-federation---assumerolewithwebidentity">Web Identity Federation - AssumeRoleWithWebIdentity</h4>
<ul>
<li>Client-Sideì—ì„œ AWSì— ì•¡ì„¸ìŠ¤ í•˜ê¸°ìœ„í•´ì„œëŠ” -&gt; AWS Cognitoë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.</li>
</ul>
<h3 id="aws-cognito">AWS Cognito</h3>
<ul>
<li><strong>ëª©ì </strong> : Client Side(ëª¨ë°”ì¼, ì›¹)ì—ì„œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ ì•¡ì„¸ìŠ¤ ì œê³µ</li>
<li><strong>ì‚¬ìš©ì˜ˆì‹œ</strong> : í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸í•˜ì—¬ S3 ì“°ê¸° ì‘ì—…ì„ í•  ìˆ˜ ìˆëŠ” ì„ì‹œ ê¶Œí•œì„ ì œê³µí•˜ê³  ì‹¶ì€ ê²½ìš°</li>
<li><strong>ë¬¸ì œ</strong> : ê·¸ë•Œë§ˆë‹¤ IAM ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.</li>
<li><strong>ì–´ë–»ê²Œ</strong>
<ul>
<li>federated IdPë¡œ ë¡œê·¸ì¸ ë˜ëŠ” ìµëª… ì•„ì´ë””</li>
<li><code>Federated Identity Pool</code>ë¡œë¶€í„° AWS ì„ì‹œ ìê²©ì¦ëª…ì„ ì–»ëŠ”ë‹¤.</li>
<li>ì´ëŸ¬í•œ ìê²©ì¦ëª…ì€ ì‚¬ìš© ê¶Œí•œì„ ëª…ì‹œí•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ IAM ì •ì±…ê³¼ í•¨ê»˜ ì œê³µ</li>
</ul>
</li>
</ul>
<h3 id="microsoft-active-directory-ad">Microsoft Active Directory (AD)</h3>
<ul>
<li>Found on any Windows Server with AD Domain Services</li>
<li>Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups</li>
<li>ì¤‘ì•™ ì§‘ì¤‘ì‹ ë³´ì•ˆ ê´€ë¦¬, ê³„ì • ìƒì„±, ê¶Œí•œ í• ë‹¹</li>
<li>ObjectsëŠ” <strong>trees</strong>ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.</li>
<li>treesì˜ ê·¸ë£¹ì€ <strong>forest</strong>ë¼ê³  í•œë‹¤.</li>
</ul>
<h3 id="aws-directory-services">AWS Directory Services</h3>
<table>
<thead>
<tr>
<th>AWS Directory Services</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AWS Managed Microsoft AD</strong></td>
<td>- AWSì—ì„œ ìì‹ ë§Œì˜ ADë¥¼ ë§Œë“¤ê³  ë¡œì»¬ì—ì„œ ì‚¬ìš©ìë¥¼ ê´€ë¦¬ <br/> - MFA ì§€ì› <br/> - Establish â€œtrustâ€ connections with your on-premises AD</td>
</tr>
<tr>
<td><strong>AD Connector</strong></td>
<td>- on-premises ADë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ Directory Gateway(proxy) <br/>- MFA ì§€ì›<br/>- ì‚¬ìš©ìëŠ” ì˜¨í”„ë ˆë¯¸ìŠ¤ ADì—ì„œ ê´€ë¦¬</td>
</tr>
<tr>
<td><strong>Simple AD</strong></td>
<td>- AD í˜¸í™˜ ê´€ë¦¬ ë””ë ‰í† ë¦¬ <br/> - on-premises ADì™€ ê²°í•©í•  ìˆ˜ ì—†ë‹¤.</td>
</tr>
</tbody>
</table>
<h2 id="aws-organizations">AWS Organizations</h2>
<ul>
<li>ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤</li>
<li>ì—¬ëŸ¬ AWS ê³„ì • ê´€ë¦¬</li>
<li>ê¸°ë³¸ ê³„ì •ì´ ë§ˆìŠ¤í„° ê³„ì •ì´ë¯€ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. (ê¸°íƒ€ ê³„ì •ì€ íšŒì› ê³„ì •)</li>
<li>íšŒì› ê³„ì •ì€ í•œ ì¡°ì§ì˜ ì¼ë¶€ë§Œ ë  ìˆ˜ ìˆë‹¤.</li>
<li>ëª¨ë“  ê³„ì •ìœ í†µí•© ì²­êµ¬ - ë‹¨ì¼ ì§€ë¶ˆ ë°©ë²•</li>
<li>EC2, S3 í• ì¸ ë“± ê°€ê²© ì±…ì • ì´ì </li>
<li>APIë¥¼ ì‚¬ìš©í•˜ì—¬ AWS ê³„ì • ìƒì„± ìë™í™”</li>
</ul>
<h3 id="ë‹¤ì¤‘-ê³„ì •-ì „ëµ">ë‹¤ì¤‘ ê³„ì • ì „ëµ</h3>
<ul>
<li>ë¶€ì„œë³„ ë¹„ìš© ì„¼í„°ë³„, dev/test/prod ë“± ê·œì œ ì œí•œ ì‚¬í•­(SCP ì´ìš©) ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ê²©ë¼ ìˆ˜ì¤€ì— ë”°ë¼ ê³„ì •ì„ ìƒì„±í•œë‹¤.</li>
<li>ê³„ì •ë‹¹ ì„œë¹„ìŠ¤ ì œí•œì´ ë³„ë„ë¡œ ìˆê³ , ë¡œê¹…ì„ ìœ„í•´ ê²©ë¦¬í•œë‹¤.</li>
</ul>
<h3 id="organizational-units-ou">Organizational Units (OU)</h3>
<h3 id="service-control-policies-scp">Service Control Policies (SCP)</h3>
<ul>
<li>IAM ì—­í• ì— Whitelist ë˜ëŠ” Blacklist</li>
<li><strong>OU</strong> ë˜ëŠ” <strong>Account</strong> ë ˆë²¨ì—ë§Œ ì ìš© ê°€ëŠ¥</li>
<li>ë§ˆìŠ¤í„° ê³„ì •ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠìŒ</li>
<li>SCPëŠ” ë£¨íŠ¸ ì‚¬ìš©ìë¥¼ í¬í•¨í•œ ëª¨ë“  ê³„ì •ì˜ ì‚¬ìš©ìì™€ Roleì— ì ìš©ëœë‹¤.</li>
<li>SCPëŠ” Service-linked ì—­í• ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.
<ul>
<li>Service-linked ì—­í• ì€ ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ë¥¼ AWS ì¡°ì§ê³¼ í†µí•©í•  ìˆ˜ ìˆë„ë¡ SCPì— ì˜í•´ ì œí•œë  ìˆ˜ ì—†ë‹¤.</li>
</ul>
</li>
<li>SCPì—ëŠ” ëª…ì‹œì ìœ¼ë¡œ Allow (í—ˆìš©)ì´ ìˆì–´ì•¼ í•œë‹¤. (ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ í—ˆìš©í•˜ì§€ ì•ŠìŒ)</li>
<li>ì‚¬ìš© ì‚¬ë¡€
<ul>
<li>íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì œí•œ</li>
<li>ì„œë¹„ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ì—¬ PCI ê·œì • ì¤€ìˆ˜ ì ìš©</li>
</ul>
</li>
</ul>
<h4 id="scp-hierarchy">SCP Hierarchy</h4>
<blockquote>
</blockquote>
<h5 id="blacklist--whitelist-ì „ëµ">Blacklist &amp; Whitelist ì „ëµ</h5>
<h6 id="íŠ¹ì •-ìœ í˜•ì˜-ì„œë¹„ìŠ¤ë¥¼-ë¸”ë™ë¦¬ìŠ¤íŠ¸ë¡œ-ë“±ë¡">íŠ¹ì • ìœ í˜•ì˜ ì„œë¹„ìŠ¤ë¥¼ ë¸”ë™ë¦¬ìŠ¤íŠ¸ë¡œ ë“±ë¡</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowsAllActions&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;DenyDynamoDB&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Deny&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;dynamodb:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="íŠ¹ì •-ìœ í˜•ì˜-ì„œë¹„ìŠ¤ë§Œ-í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì—-ì¶”ê°€">íŠ¹ì • ìœ í˜•ì˜ ì„œë¹„ìŠ¤ë§Œ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ec2:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;cloudwatch:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ì¡°ì§-ì´ë™">ì¡°ì§ ì´ë™</h3>
<h4 id="ê³„ì •-ë§ˆì´ê·¸ë ˆì´ì…˜">ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜</h4>
<ol>
<li>ì´ì „ ì¡°ì§ì—ì„œ êµ¬ì„±ì› ê³„ì • ì œê±°</li>
<li>ìƒˆ ì¡°ì§ì—ì„œ ì´ˆëŒ€ì • ë³´ë‚´ê¸°</li>
<li>íšŒì› ê³„ì •ì—ì„œ ìƒˆ ì¡°ì§ì— ëŒ€í•œ ì´ˆëŒ€ ìˆ˜ë½</li>
</ol>
<h4 id="ë§ˆìŠ¤í„°-ê³„ì •ì˜-ë§ˆì´ê·¸ë ˆì´ì…˜">ë§ˆìŠ¤í„° ê³„ì •ì˜ ë§ˆì´ê·¸ë ˆì´ì…˜</h4>
<ol>
<li>ì¡°ì§ì—ì„œ êµ¬ì„±ì› ê³„ì • ì œê±°</li>
<li>ì´ì „ ì¡°ì§ ì‚­ì œ</li>
<li>ìœ„ì˜ ê³¼ì • ë°˜ë³µ ì´ì „ ë§ˆìŠ¤í„° ê³„ì •ì„ ìƒˆ ì¡°ì§ìœ¼ë¡œ ì´ˆëŒ€</li>
</ol>
<h2 id="iam-conditions">IAM Conditions</h2>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>aws:SourceIP:<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>API í˜¸ì¶œí•˜ëŠ” ê³³ìœ¼ë¡œë¶€í„° í´ë¼ì´ì–¸íŠ¸ IPë¥¼ ì œí•œ</li>
<li>ì•„ë˜ ì˜ˆì‹œëŠ” í•´ë‹¹ ì•„ì´í”¼ ë²”ìœ„ê°€ ì•„ë‹Œ ê³³ì—ì„œëŠ” ìš”ì²­ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ (NotIpAddress)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Deny&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;NotIpAddress&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;aws:SourceIp&#34;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;192.0.2.0/24&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;203.0.113.0/24&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">//...
</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>aws:RequestedRegion:<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>API í˜¸ì¶œì´ ì´ë£¨ì–´ì§€ëŠ” ë¦¬ì ¼ì„ ì œí•œ</li>
<li>ìš”ì²­ë¦¬ì „ì´ <code>eu-central-1</code>, <code>eu-west-1</code> ë‹¤ë¥¸ ë¦¬ì „ì—ì„œ ì˜¨ ê²ƒì€ ìˆ˜ë½í•˜ì§€ ì•ŠìŒ.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowOnlyInsideEU&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ec2:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;rds:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;dynamodb:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;SingleEquals&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;aws:RequestedRegion&#34;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;eu-central-1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;eu-west-1&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">//...
</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Restrict based on tags<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>íƒœê·¸ê°€ <code>DataAnalytics</code>ì´ë©´ì„œ ë¶€ì„œê°€ <code>Data</code>ì¼ ë•Œë§Œ ec2ì˜ í•´ë‹¹ ì‘ì—…ì´ í—ˆìš©</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;StartStopIfTags&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;ec2:StartInstances&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;ec2:StopInstances&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;ec2:DescribeTags&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:ec2:regin:account-id:instance/*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;StringEquals&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;ec2:ResourceTag/Project&#34;</span> <span class="p">:</span> <span class="s2">&#34;DataAnalytics&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;aws:PrincipalTag/Department&#34;</span><span class="p">:</span> <span class="s2">&#34;Data&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>ë‹¤ìš”ì†Œ ì¸ì¦ ê°•ì œ<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowAllActionsForEC2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;ec2:*&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;DenyStopAndTerminateWhenMFAIsNotPresent&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Deny&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ec2:StopInstances&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ec2:TerminateInstances&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;Condition&#34;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;BoolIfExists&#34;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;aws:MultiFactorAuthPresent&#34;</span> <span class="p">:</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="iam-for-s3">IAM for S3</h2>
<div class="details admonition success open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-check-circle fa-fw" aria-hidden="true"></i>IAM for S3<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li><code>ListBucket</code> : Bucket ë ˆë²¨ì˜ permission
<ul>
<li><code>&quot;arn:aws:s3:::test&quot;</code></li>
</ul>
</li>
<li><code>GetObject</code>, <code>PutObject</code>, <code>DeleteObject</code> : Object ë ˆë²¨ì˜ permission
<ul>
<li><code>arn:aws:s3:::test/*</code></li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>    
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;s3:ListBucket&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;arn:aws:s3:::test&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;s3:GetObject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;s3:PutObject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;s3:DeleteObject&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;arn:aws:s3:::test/*&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h3 id="iam-roleê³¼-ë¦¬ì†ŒìŠ¤-ê¸°ë°˜ì˜-ì •ì±…">IAM Roleê³¼ ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ì˜ ì •ì±…</h3>
<p>ê³„ì • Aì—ì„œ ê³„ì • Bì— ì¡´ì¬í•˜ëŠ” S3 ë²„í‚·ì„ í”„ë¡ì‹œë¡œ ì‚¬ìš©í•˜ì—¬ ì—°ê²°í•˜ëŠ” ëŒ€ì‹  ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì •ì±…ìœ¼ë¡œ ì—°ê²°í–ˆì„ ë•Œ</p>
<ul>
<li>ì—­í• ì„ ìˆ˜ì„ë°›ì„ ë•Œ ê³„ì • Aì˜ ì›ë˜ ê¶Œí•œì„ í¬ê¸°í•˜ê³  Roleì— í• ë‹¹ëœ ê¶Œí•œì„ ê°–ê²Œ ëœë‹¤.</li>
<li>ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì •ì±…ì„ ì‚¬ìš©í•  ë•Œ ì£¼ì²´ê°€ ê¶Œí•œì„ í¬ê¸°í•  í•„ìš”ê°€ ìˆë‹¤.
<ul>
<li>example: ê³„ì • AëŠ” DynamoDB í…Œì´ë¸”ì„ ìŠ¤ìº”í•˜ì—¬ Bê³„ì •ì˜ S3 ë¤í”„</li>
</ul>
</li>
<li>Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc&hellip;</li>
</ul>
<h3 id="iam-permission-boundaries">IAM Permission Boundaries</h3>
<ul>
<li>IAM permission boundariesëŠ” ì‚¬ìš©ìì™€ ì—­í• ì— ëŒ€í•´ ì§€ì› (ê·¸ë£¹ì€ ì§€ì›í•˜ì§€ ì•ŠìŒ)</li>
<li>ê´€ë¦¬ ì •ì±…ì„ ì‚¬ìš©í•˜ì—¬ IAM ì—”í‹°í‹°ê°€ ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ê¶Œí•œì„ ì„¤ì •í•˜ëŠ” ê³ ê¸‰ ê¸°ëŠ¥ì´ë‹¤.</li>
</ul>
<figure><a class="lightgallery" href="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png" title="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png" data-thumbnail="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png" data-sub-html="<h2>https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_boundaries.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png"
            data-srcset="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png, /posts/images/aws/EffectivePermissions-rbp-boundary-id.png 1.5x, /posts/images/aws/EffectivePermissions-rbp-boundary-id.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/EffectivePermissions-rbp-boundary-id.png" width="10%" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_boundaries.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_boundaries.html</a></figcaption>
    </figure>
<h4 id="permission-boundaries-ì‚¬ìš©-ì‚¬ë¡€">Permission Boundaries ì‚¬ìš© ì‚¬ë¡€</h4>
<ul>
<li>ê¶Œí•œ ë²”ìœ„ ë‚´ì—ì„œ ë¹„ê´€ë¦¬ìì—ê²Œ ì±…ì„ ìœ„ì„</li>
<li>ê°œë°œìê°€ ìì‹ ì˜ ê¶Œí•œì„ ê´€ë¦¬í•  ìˆ˜ ì—†ë„ë¡ í•˜ê³  ìì²´ ì •ì±… ë° ì‚¬ìš© ê¶Œí•œì„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©</li>
<li>ì¡°ì§ ë° SCPë¥¼ ì‚¬ìš©í•˜ëŠ” ì „ì²´ ê³„ì • ëŒ€ì‹  íŠ¹ì • ì‚¬ìš©ì í•œëª…ì„ ì œí•œí•  ë•Œ ìœ ìš©</li>
</ul>
<h4 id="iam-policy-evaluation-logic">IAM Policy Evaluation Logic</h4>
<figure><a class="lightgallery" href="/posts/images/aws/PolicyEvaluationHorizontal111621.png" title="/posts/images/aws/PolicyEvaluationHorizontal111621.png" data-thumbnail="/posts/images/aws/PolicyEvaluationHorizontal111621.png" data-sub-html="<h2>https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/PolicyEvaluationHorizontal111621.png"
            data-srcset="/posts/images/aws/PolicyEvaluationHorizontal111621.png, /posts/images/aws/PolicyEvaluationHorizontal111621.png 1.5x, /posts/images/aws/PolicyEvaluationHorizontal111621.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/PolicyEvaluationHorizontal111621.png" />
    </a><figcaption class="image-caption"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html" target="_blank" rel="noopener noreffer">https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html</a></figcaption>
    </figure>
<h2 id="aws-resource-access-manager-ram">AWS Resource Access Manager (RAM)</h2>
<ul>
<li>ì†Œìœ í•œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ë¥¸ AWS ê³„ì •ê³¼ ê³µìœ </li>
<li>ëª¨ë“  ê³„ì • ë˜ëŠ” ì¡°ì§ ë‚´ì—ì„œ ê³µìœ </li>
<li>ë¦¬ì†ŒìŠ¤ ì¤‘ë³µ ë°©ì§€</li>
<li><strong>VPC ì„œë¸Œë„·</strong>
<ul>
<li>ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë™ì¼í•œ ì„œë¸Œë„·ì—ì„œ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©</li>
<li>ë™ì¼í•œ AWS ì¡°ì§ ì‚¬ìš©ìì—¬ì•¼ í•œë‹¤.</li>
<li>Security Group ë° ê¸°ë³¸ VPC ê³µìœ  í•  ìˆ˜ ì—†ìŒ</li>
<li>ì°¸ê°€ìëŠ” ìì‹ ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ</li>
<li>ì°¸ê°€ìëŠ” ë‹¤ë¥¸ ì°¸ê°€ì ë˜ëŠ” ì†Œìœ ìì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê±°ë‚˜ ìˆ˜ì • ë° ì‚­ì œí•  ìˆ˜ ì—†ìŒ</li>
</ul>
</li>
<li><strong>AWS Transit Gateway</strong></li>
<li><strong>Route53 Resolver Rules</strong></li>
<li><strong>License Manager Configurations</strong></li>
</ul>
<h3 id="resource-access-manager---vpc-ì˜ˆì‹œ">Resource Access Manager - VPC ì˜ˆì‹œ</h3>
<a class="lightgallery" href="/posts/images/aws/resource-access-manager-vpc-example.png" title="/posts/images/aws/resource-access-manager-vpc-example.png" data-thumbnail="/posts/images/aws/resource-access-manager-vpc-example.png">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/posts/images/aws/resource-access-manager-vpc-example.png"
            data-srcset="/posts/images/aws/resource-access-manager-vpc-example.png, /posts/images/aws/resource-access-manager-vpc-example.png 1.5x, /posts/images/aws/resource-access-manager-vpc-example.png 2x"
            data-sizes="auto"
            alt="/posts/images/aws/resource-access-manager-vpc-example.png" />
    </a>
<ul>
<li><strong>ê°ê°ì˜ ê³„ì •</strong>
<ul>
<li>ìì²´ ìì›ì— ëŒ€í•œ ì±…ì„ì´ ì¡´ì¬</li>
<li>ë‹¤ë¥¸ ê³„ì •ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê±°ë‚˜ ìˆ˜ì • ë˜ëŠ” ì‚­ì œ ë¶ˆê°€</li>
</ul>
</li>
<li><strong>ë„¤íŠ¸ì›Œí¬ëŠ” ê³µìœ ëœë‹¤.</strong>
<ul>
<li>VPCì— êµ¬í˜„ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ëŠ” VPCì˜ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ í†µì‹  ê°€ëŠ¥</li>
<li>ê°œì¸ IPë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ê³„ì •ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‰½ê²Œ ì•¡ì„¸ìŠ¤</li>
<li>ìµœëŒ€ ë³´ì•ˆì„ ìœ„í•´ ë‹¤ë¥¸ ê³„ì •ì˜ ë³´ì•ˆ ê·¸ë£¹ ì°¸ì¡°</li>
</ul>
</li>
</ul>
<h2 id="aws-single-sign-on-sso">AWS Single Sign-On (SSO)</h2>
<ul>
<li>Singe sign-onì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ì—¬ ì—¬ëŸ¬ ê³„ì • ë° 3rd-party ë¹„ì¦ˆë‹ˆìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•¡ì„¸ìŠ¤í•œë‹¤.</li>
<li><strong>AWS ì¡°ì§ê³¼ í†µí•©</strong></li>
<li><strong>SAML 2.0 ë§ˆí¬ì—…</strong> ì§€ì›</li>
<li>on-premisesë¡œ í†µí•©ëœ <strong>Active Directory</strong>ì™€ í†µí•©</li>
<li>ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬</li>
<li>CloudTrailì„ í†µí•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê°ì‚¬</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-06-29&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/b7aad3025e10b4e333b45c35ce1386d01ceab0d3" target="_blank" title="commit by riley817(riley0422@icloud.com) b7aad3025e10b4e333b45c35ce1386d01ceab0d3: Merge branch &#39;develop&#39;">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>b7aad30</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/aws/">AWS</a>,&nbsp;<a href="/tags/aws-iam/">AWS IAM</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/aws-06-ec2-associate/" class="prev" rel="prev" title="6. AWS Elastic Compute Cloud (EC2) - Associate"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>6. AWS Elastic Compute Cloud (EC2) - Associate</a>
            <a href="/aws-07-ebs/" class="next" rel="next" title="7. AWS EC2 Instance Storage">7. AWS EC2 Instance Storage<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><script src="https://utteranc.es/client.js"
            repo="riley817/blog-comment"
            issue-term="pathname"
            label="âœ¨ğŸ’¬âœ¨"
            theme="github-light"
            crossorigin="anonymous"
            async>
        </script>
    </div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.128.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/riley817" target="_blank">Riley</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"algoliaAppID":"","algoliaIndex":"","algoliaSearchKey":"","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
